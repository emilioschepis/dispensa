# Dispensa

Hello! This is the public repository for Dispensa, the application that helps you track what groceries and items you have at home so you can better organize the shopping for the week or the next meal.

This application was made as part of the [Hashnode x Hasura Hackathon](https://townhall.hashnode.com/hasura-hackathon) in March 2022.

The whole journey was blogged on Hashnode, you can find the series here: [Hashnode x Hasura Hackathon Series](https://blog.emilioschepis.com/series/hasura-hashnode-hackathon)

## Download

You can try out the Open Beta right now!

üçé [TestFlight Open Beta for iOS](https://testflight.apple.com/join/behaUzkW)

ü§ñ [Beta Track for Android](https://play.google.com/store/apps/details?id=com.emilioschepis.dispensa)

## Tech stack

Even though the app is simple, it is built on modern technologies and is ready to be scaled and improved without problems.

### Authentication

The authentication is handled by [Auth0](https://auth0.com/) and integrated in the app through [Expo Auth Session](https://docs.expo.dev/versions/latest/sdk/auth-session/).
This approach leverages JWT tokens to keep the user authenticated through refresh tokens that rotate regularly. 
Being session-less allows us not to have any actual servers that handle the authentication state of the users.

### Database & GraphQL

Of course the star of the show is [Hasura](https://hasura.io/), which provides a GraphQL layer on top of a Postgres database making it incredibly flexible and quick to iterate on.

The JWT generated by Auth0 is used to authenticate and authorize users on their inventory and products, and the use of GraphQL ensures that minimal network bandwidth is used during sessions.

For this Hackathon I went with [Hasura Cloud](https://hasura.io/cloud/) for its auto-scaling and monitoring capabilities. The database itself is hosted on [Heroku](https://www.heroku.com/postgres).

### Code generation

The integration between Hasura and the app is generated by [GraphQL Code Generator](https://www.graphql-code-generator.com/) which keeps the queries type-safe and always up-to-date.

The generated types are then used by the [urql GraphQL client](https://formidable.com/open-source/urql/) in combination with a couple of [custom Exchanges](https://github.com/emilioschepis/dispensa/tree/main/src/graphql/exchanges).

### CI & CD

Dispensa has a CI & CD system integrated through [GitHub Actions](https://github.com/features/actions) and [Expo EAS](https://expo.dev/eas).

On each push, the project is built and linted [through this action](https://github.com/emilioschepis/dispensa/blob/main/.github/workflows/ci.yml).

Whenever a new tag is created, a version is built and deployed to Google Play and the App Store with a single command [through this action](https://github.com/emilioschepis/dispensa/blob/main/.github/workflows/production.yml).
